.container
  height 100vh
  position relative
  background #f5f5f5

// 搜索栏 - 在卡片内部
.searchBar
  padding 16px 16px 12px 16px
  border-bottom 1px solid rgba(0, 0, 0, 0.05)
  display flex
  align-items center
  gap 8px

.searchInput
  flex 1
  display flex
  align-items center
  background rgba(245, 245, 245, 0.8)
  backdrop-filter blur(10px)
  border-radius 20px
  padding 8px 16px
  transition all 0.3s ease
  
  &:focus-within
    background white
    box-shadow 0 4px 12px rgba(102, 126, 234, 0.15)
  
  :global(.rv-field)
    background transparent
    border none
    padding 8px 0
    
  :global(.rv-field__control)
    font-size 0.49rem // 37px
    
  :global(.rv-field__control::placeholder)
    color #999

.searchButton
  background linear-gradient(135deg, #667eea 0%, #764ba2 100%)
  color white
  border none
  border-radius 0.21rem // 16px
  padding 0.08rem 0.21rem // 6px 16px
  font-size 0.43rem // 32px
  margin-left 0.13rem // 10px
  cursor pointer
  transition all 0.3s ease
  display flex
  align-items center
  justify-content center
  box-shadow 0 0.05rem 0.16rem rgba(102, 126, 234, 0.3) // 4px 12px
  
  &:active
    background linear-gradient(135deg, #5a71d6 0%, #6a4492 100%)
    transform scale(0.95)
    box-shadow 0 0.03rem 0.11rem rgba(102, 126, 234, 0.2) // 2px 8px
  
  :global(.rv-icon)
    font-size 0.36rem // 27px

.locationButton
  min-width 0.53rem // 40px
  height 0.53rem // 40px
  border-radius 0.27rem // 20px
  display flex
  align-items center
  justify-content center
  background #f5f5f5
  border 0.01rem solid #e0e0e0 // 1px
  
  :global(.rv-icon)
    font-size 0.49rem // 37px
    color #666

// 地图容器
.mapContainer
  position absolute
  top 0
  left 0
  right 0
  bottom 0
  overflow hidden

.map
  width 100%
  height 100%
  background #e8f4f8
  position relative
  border-radius 0
  overflow hidden
  min-height 300px
  
  // Canvas 样式
  canvas
    display block
    width 100%
    height 100%
    cursor grab
    
    &:active
      cursor grabbing

// 地图加载状态
.mapLoading
  position absolute
  top 50%
  left 50%
  transform translate(-50%, -50%)
  display flex
  flex-direction column
  align-items center
  color #666
  z-index 10
  
  .loadingIcon
    font-size 48px
    margin-bottom 12px
    animation pulse 2s infinite
    
  .loadingText
    font-size 14px
    color #999

// 地图错误状态
.mapError
  position absolute
  top 50%
  left 50%
  transform translate(-50%, -50%)
  display flex
  flex-direction column
  align-items center
  color #ff4757
  z-index 10
  text-align center
  
  .errorIcon
    font-size 48px
    margin-bottom 12px
    
  .errorText
    font-size 16px
    font-weight 600
    margin-bottom 4px
    color #ff4757
    
  .errorSubtext
    font-size 12px
    color #999

// 地图控制按钮
.mapControls
  position absolute
  top 80px
  right 20px
  display flex
  flex-direction row
  align-items center
  gap 12px
  z-index 1001

.controlButton, .searchButton
  width 48px
  height 48px
  background rgba(255, 255, 255, 0.95)
  border-radius 24px
  display flex
  align-items center
  justify-content center
  box-shadow 0 2px 12px rgba(0, 0, 0, 0.15)
  cursor pointer
  transition all 0.2s ease
  backdrop-filter blur(10px)
  border 1px solid rgba(255, 255, 255, 0.2)
  position relative
  overflow visible

  &:hover
    background white
    box-shadow 0 4px 20px rgba(0, 0, 0, 0.2)
    transform translateY(-1px)

  &:active
    transform translateY(0) scale(0.95)

.controlIcon
  font-size 20px
  line-height 1

// 动画效果
@keyframes pulse
  0%
    opacity 1
    transform scale(1)
  50%
    opacity 0.7
    transform scale(1.1)
  100%
    opacity 1
    transform scale(1)

// 全局动画样式，用于地图标记
:global
  @keyframes pulse
    0%
      opacity 1
      transform scale(1)
    50%
      opacity 0.3
      transform scale(1.4)
    100%
      opacity 1
      transform scale(1)

// 地图标记样式
.mapMarker
  position absolute
  width 24px
  height 24px
  background #ff4757
  border 2px solid white
  border-radius 50%
  transform translate(-50%, -50%)
  box-shadow 0 2px 8px rgba(0, 0, 0, 0.3)
  cursor pointer
  transition all 0.3s ease
  
  &:hover
    transform translate(-50%, -50%) scale(1.2)
    z-index 10
    
  &::after
    content ''
    position absolute
    top 100%
    left 50%
    transform translateX(-50%)
    width 0
    height 0
    border-left 6px solid transparent
    border-right 6px solid transparent
    border-top 8px solid #ff4757

// 错误提示
.errorText
  position absolute
  bottom 20px
  left 50%
  transform translateX(-50%)
  font-size 14px
  color #ff6b6b
  background rgba(255, 255, 255, 0.9)
  padding 8px 16px
  border-radius 16px
  box-shadow 0 2px 8px rgba(0, 0, 0, 0.1)
  z-index 30

// POI列表
.poiList
  background white
  border-top-left-radius 24px
  border-top-right-radius 24px
  max-height 60vh  // 增加最大高度，使列表可以显示更多内容
  display flex
  flex-direction column
  box-shadow 0 -4px 20px rgba(0, 0, 0, 0.1)
  position relative
  transform translateY(-20px)

.container
  height 100%
  display flex
  flex-direction column
  background #f8f9fa

// 搜索栏 - 在卡片内部
.searchBar
  padding 16px 16px 12px 16px
  border-bottom 1px solid #f0f0f0
  display flex
  align-items center
  gap 8px

.searchInput
  flex 1
  display flex
  align-items center
  background #f5f5f5
  border-radius 20px
  padding 8px 16px
  
  :global(.rv-field)
    background transparent
    border none
    padding 8px 0
    
  :global(.rv-field__control)
    font-size 37px
    
  :global(.rv-field__control::placeholder)
    color #999

.searchButton
  width 48px
  height 48px
  background rgba(74, 144, 226, 0.9)
  color white
  border none
  border-radius 24px
  margin-left 10px
  cursor pointer
  transition all 0.2s ease
  display flex
  align-items center
  justify-content center
  box-shadow 0 2px 8px rgba(0, 0, 0, 0.15)
  
  &:hover
    background rgba(74, 144, 226, 1)
    box-shadow 0 4px 12px rgba(0, 0, 0, 0.2)
  
  &:active
    background rgba(74, 144, 226, 1)
    transform scale(0.95)
  
  :global(.rv-icon)
    font-size 24px
    color white

.locationButton
  width 48px
  height 48px
  border-radius 24px
  display flex
  align-items center
  justify-content center
  background #f5f5f5
  border 1px solid #e0e0e0
  cursor pointer
  transition all 0.2s ease
  box-shadow 0 2px 8px rgba(0, 0, 0, 0.15)
  
  &:hover
    background white
    box-shadow 0 4px 12px rgba(0, 0, 0, 0.2)
  
  &:active
    transform scale(0.95)
  
  :global(.rv-icon)
    font-size 24px
    color #666

// 地图容器
.mapContainer
  flex 1
  position relative
  overflow hidden

.map
  width 100%
  height 100%
  background #e8f4f8
  position relative
  border-radius 0
  overflow hidden
  min-height 300px
  
  // Canvas 样式
  canvas
    display block
    width 100%
    height 100%
    cursor grab
    
    &:active
      cursor grabbing

// 地图加载状态
.mapLoading
  position absolute
  top 50%
  left 50%
  transform translate(-50%, -50%)
  display flex
  flex-direction column
  align-items center
  color #666
  z-index 10
  
  .loadingIcon
    font-size 48px
    margin-bottom 12px
    animation pulse 2s infinite
    
  .loadingText
    font-size 14px
    color #999

// 地图错误状态
.mapError
  position absolute
  top 50%
  left 50%
  transform translate(-50%, -50%)
  display flex
  flex-direction column
  align-items center
  color #ff4757
  z-index 10
  text-align center
  
  .errorIcon
    font-size 48px
    margin-bottom 12px
    
  .errorText
    font-size 16px
    font-weight 600
    margin-bottom 4px
    color #ff4757
    
  .errorSubtext
    font-size 12px
    color #999

// 地图控制按钮
.mapControls
  position absolute
  right 16px
  top 25%  // 在可见地图区域（不被POI卡片遮挡的上半部分）的中心
  transform translateY(-50%)
  display flex
  flex-direction column
  gap 8px
  z-index 20
  
  .controlButton
    width 48px
    height 48px
    background rgba(255, 255, 255, 0.9)
    border-radius 24px
    display flex
    align-items center
    justify-content center
    box-shadow 0 2px 8px rgba(0, 0, 0, 0.15)
    cursor pointer
    transition all 0.2s ease
    margin-bottom 12px
    position relative
    overflow visible
    
    &:hover
      background white
      box-shadow 0 4px 12px rgba(0, 0, 0, 0.2)
    
    &:active
      transform scale(0.95)
      
    .controlIcon
      font-size 24px
      color #666

// 定位中状态
.controlButton.locating
  animation locationPulse 1.5s ease-in-out infinite
  
  .controlIcon
    animation locationSpin 2s linear infinite

@keyframes locationPulse
  0%, 100%
    box-shadow 0 2px 8px rgba(0, 0, 0, 0.15), 0 0 0 0 rgba(74, 144, 226, 0.4)
  50%
    box-shadow 0 2px 8px rgba(0, 0, 0, 0.15), 0 0 0 8px rgba(74, 144, 226, 0)

@keyframes locationSpin
  from
    transform rotate(0deg)
  to
    transform rotate(360deg)

// 定位信息显示
.locationInfo
  position absolute
  top -35px
  left 50%
  transform translateX(-50%)
  background rgba(0, 0, 0, 0.8)
  color white
  padding 4px 8px
  border-radius 12px
  font-size 10px
  white-space nowrap
  pointer-events none
  backdrop-filter blur(10px)
  
  &::after
    content ''
    position absolute
    top 100%
    left 50%
    transform translateX(-50%)
    border 4px solid transparent
    border-top-color rgba(0, 0, 0, 0.8)

.locationAccuracy
  font-weight 600
  color #4A90E2

.locationTime
  font-size 9px
  opacity 0.8
  margin-top 1px

// 动画效果
@keyframes pulse
  0%
    opacity 1
    transform scale(1)
  50%
    opacity 0.7
    transform scale(1.1)
  100%
    opacity 1
    transform scale(1)

// 全局动画样式，用于地图标记
:global
  @keyframes pulse
    0%
      opacity 1
      transform scale(1)
    50%
      opacity 0.3
      transform scale(1.4)
    100%
      opacity 1
      transform scale(1)

// 地图标记样式
.mapMarker
  position absolute
  width 24px
  height 24px
  background #ff4757
  border 2px solid white
  border-radius 50%
  transform translate(-50%, -50%)
  box-shadow 0 2px 8px rgba(0, 0, 0, 0.3)
  cursor pointer
  transition all 0.3s ease
  
  &:hover
    transform translate(-50%, -50%) scale(1.2)
    z-index 10
    
  &::after
    content ''
    position absolute
    top 100%
    left 50%
    transform translateX(-50%)
    width 0
    height 0
    border-left 6px solid transparent
    border-right 6px solid transparent
    border-top 8px solid #ff4757

// 错误提示
.errorText
  position absolute
  bottom 20px
  left 50%
  transform translateX(-50%)
  font-size 14px
  color #ff6b6b
  background rgba(255, 255, 255, 0.9)
  padding 8px 16px
  border-radius 16px
  box-shadow 0 2px 8px rgba(0, 0, 0, 0.1)
  z-index 30

// POI列表
.poiList
  background white
  border-top-left-radius 32px
  border-top-right-radius 32px
  max-height calc(100vh - 100px) // 确保不覆盖顶部控制按钮
  min-height 80px // 最小高度确保拖拽手柄可见
  display flex
  flex-direction column
  box-shadow 0 -4px 20px rgba(0, 0, 0, 0.1)
  position fixed
  bottom 0
  left 0
  right 0
  cursor grab
  user-select none
  z-index 999
  
  &:active
    cursor grabbing
  
  // 拖拽手柄
  &::before
    content ''
    position absolute
    top 12px
    left 50%
    transform translateX(-50%)
    width 40px
    height 4px
    background rgba(0, 0, 0, 0.2)
    border-radius 2px
    z-index 10
    pointer-events none

.poiHeader
  padding 0.32rem 0.21rem 0.11rem 0.21rem // 24px 16px 8px 16px (增加顶部padding为拖拽手柄留空间)
  border-bottom 0.01rem solid rgba(0, 0, 0, 0.05) // 1px
  
  h3
    margin 0
    font-size 0.64rem // 48px
    font-weight 600
    background linear-gradient(135deg, #667eea 0%, #764ba2 100%)
    -webkit-background-clip text
    -webkit-text-fill-color transparent
    display flex
    align-items center
    gap 0.11rem // 8px

.poiCount
  font-size 0.49rem // 37px
  color #999
  font-weight 400

// 定位历史记录
.locationHistory
  margin-top 12px
  padding 12px
  background rgba(74, 144, 226, 0.05)
  border-radius 8px
  border-left 3px solid #4A90E2

.historyTitle
  font-size 12px
  color #4A90E2
  font-weight 600
  margin-bottom 8px

.historyList
  display flex
  gap 8px
  overflow-x auto
  padding-bottom 4px

.historyItem
  flex-shrink 0
  background white
  border-radius 6px
  padding 6px 10px
  cursor pointer
  transition all 0.2s ease
  border 1px solid rgba(74, 144, 226, 0.2)
  min-width 60px
  text-align center
  
  &:hover
    background #4A90E2
    color white
    transform translateY(-1px)
    box-shadow 0 2px 8px rgba(74, 144, 226, 0.3)

.historyTime
  font-size 11px
  font-weight 600
  line-height 1.2

.historyAccuracy
  font-size 10px
  opacity 0.8
  margin-top 2px

.poiItems
  flex 1
  overflow-y auto
  padding 8px 0
  max-height calc(60vh - 120px)  // 确保内容区域可以滚动，减去头部和搜索栏的高度
  scroll-behavior smooth
  
  &::-webkit-scrollbar
    width 6px
    
  &::-webkit-scrollbar-track
    background rgba(0, 0, 0, 0.05)
    border-radius 3px
    
  &::-webkit-scrollbar-thumb
    background rgba(102, 126, 234, 0.3)
    border-radius 3px
    
    &:hover
      background rgba(102, 126, 234, 0.5)

.poiItem
  padding 16px
  border-bottom 1px solid #f0f0f0
  display flex
  align-items center
  cursor pointer
  transition all 0.3s ease
  border-radius 16px
  margin 0 8px 8px 8px
  
  &:hover
    background rgba(102, 126, 234, 0.05)
    
  &:active
    background rgba(102, 126, 234, 0.1)
    transform scale(0.98)
    
  &.poiItemSelected
    background linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%)
    border-left 4px solid #667eea

.poiInfo
  flex 1
  min-width 0

.poiName
  font-size 0.48rem // 36px
  font-weight 600
  color #2c3e50
  margin-bottom 0.05rem // 4px
  overflow hidden
  text-overflow ellipsis
  white-space nowrap

.poiAddress
  font-size 0.41rem // 31px
  color #7f8c8d
  margin-bottom 0.08rem // 6px
  overflow hidden
  text-overflow ellipsis
  white-space nowrap

.poiMeta
  display flex
  align-items center
  gap 8px
  flex-wrap wrap

.poiType
  font-size 0.37rem // 28px
  color white
  padding 0.05rem 0.13rem // 4px 10px
  border-radius 0.19rem // 14px
  font-weight 500
  box-shadow 0 0.03rem 0.11rem rgba(0, 0, 0, 0.1) // 2px 8px

.poiRating
  font-size 0.41rem // 31px
  color #f39c12

.poiDistance
  font-size 0.41rem // 31px
  color #95a5a6

.poiArrow
  font-size 0.49rem // 37px
  color #bdc3c7
  margin-left 0.11rem // 8px

// POI详情弹窗
.poiDetailPopup
  :global(.rv-popup__content)
    max-height 60vh
    background rgba(255, 255, 255, 0.98)
    backdrop-filter blur(20px)
    border-top-left-radius 24px
    border-top-right-radius 24px

.poiDetail
  padding 20px

.poiDetailHeader
  display flex
  align-items center
  justify-content space-between
  margin-bottom 20px
  
  h2
    margin 0
    font-size 48px
    font-weight 600
    color #2c3e50
    flex 1

.poiDetailType
  font-size 37px
  color white
  padding 6px 12px
  border-radius 12px
  font-weight 500
  margin-left 12px

.poiDetailInfo
  margin-bottom 20px
  
  :global(.rv-cell)
    padding 12px 0
    
  :global(.rv-cell__title)
    font-size 43px
    color #2c3e50
    
  :global(.rv-cell__value)
    font-size 43px
    color #7f8c8d

.poiDetailActions
  display flex
  gap 12px
  margin-top 16px

.routeButton
  flex 1
  height 44px
  border-radius 22px
  font-size 43px
  font-weight 600
  border 1px solid rgba(102, 126, 234, 0.3) !important
  color #667eea !important
  
  &:active
    background rgba(102, 126, 234, 0.1) !important
    transform scale(0.98)

.addButton
  flex 2
  height 44px
  border-radius 22px
  font-size 43px
  font-weight 600
  display flex
  align-items center
  justify-content center
  gap 6px
  background linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important
  border none !important
  box-shadow 0 4px 12px rgba(102, 126, 234, 0.3)
  
  &:active
    transform scale(0.98)
    box-shadow 0 2px 8px rgba(102, 126, 234, 0.2)
  
  :global(.rv-icon)
    font-size 48px

// 响应式适配
@media (max-width: 375px)
  .searchBar
    padding 10px 12px
    
  .searchInput
    padding 0 12px
    
  .poiList
    max-height 35vh
    
  .poiItem
    padding 10px 12px
    
  .poiDetail
    padding 16px
    
  .poiDetailActions
    gap 8px
    
  .routeButton, .addButton
    height 40px
    font-size 13px

